<%= form_with(model: user, local: true) do |f| %>
    <% if user.errors.any? %> 
        <div class="alert alert-danger"> 
            <%= pluralize(@user.errors.count, "error") %> prohibited this <%= @user.name %> from being saved:
            <ul> 
                <% @user.errors.full_messages.each do |message| %> 
                    <li><%= message %></li> 
                <% end %> 
            </ul> 
        </div> 
    <% end %> 
     <% if action_name =='edit'%>
        <div class="field mb-2">
            <% if user.image && user.image.url%>
                <div class="text-left py-3 ">      
                    <%= image_tag(user.image.url, class: 'img-fluid mb-3 thumb rounded')  %>
                </div>
            <% end %>
            <%= f.file_field :image, class: 'visually-hidden', id: 'image' %>
            <label class=" btn btn-light" for="image">
            <i class="bi bi-card-image fs-4"></i> Select a picture
            </label>
            <%= f.hidden_field :image_cache %>
        </div>
    <% end %>
    <div class="form-floating mb-3">
        <%= f.text_field :name, class: 'form-control' %> 
        <%= f.label :name %> 
    </div>
    <div class="form-floating mb-3">
        <%= f.email_field :email, class: 'form-control' %> 
        <%= f.label :email %> 
    </div>
    <div class="form-floating mb-3">
        <%= f.password_field :password, class: 'form-control' %> 
        <%= f.label :password %> 
    </div>
    <div class="form-floating mb-3">
        <%= f.password_field :password_confirmation, class: 'form-control' %> 
        <%= f.label :password_confirmation %> 
    </div>
    <%= f.submit "Create my account", class: 'btn btn-primary' %> 
    
<% end %>